# Postal - –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Ubuntu

> **–ù–æ–≤–æ–µ!** –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å Postal –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ Ubuntu –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–æ–≤!

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
./script/dev-setup.sh
./bin/postal make-user
foreman start -f Procfile.dev
```

### –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä Ubuntu 22.04:
```bash
sudo ./script/ubuntu-install.sh
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ):
```bash
./script/deploy-update.sh
```

**–í–æ—Ç –∏ –≤—Å—ë!** –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–æ–≤. ‚ö°

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (RU)](doc/QUICK_START_RU.md)** - –≥–ª–∞–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Ç–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **[–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](doc/UBUNTU_DEPLOYMENT.md)** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **[Official English README](README.md)** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Postal

---

## üõ† –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|--------|------------|-------------------|
| `script/ubuntu-install.sh` | –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä | –û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ |
| `script/deploy-update.sh` | –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ git push —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ |
| `script/dev-setup.sh` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | –û–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –º–∞—à–∏–Ω–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ |
| `script/check-status.sh` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã | –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º |

---

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ native —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –ë—ã–ª–æ (Docker):
1. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ ‚Üí commit ‚Üí push
2. `docker build` (5-10 –º–∏–Ω—É—Ç...)
3. `docker-compose down`
4. `docker-compose up`
5. –ù–∞–¥–µ—è—Ç—å—Å—è —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ç–∞–ª–æ (Native Ubuntu):
1. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ ‚Üí commit ‚Üí push
2. `./script/deploy-update.sh` (30-60 —Å–µ–∫—É–Ω–¥)
3. –ì–æ—Ç–æ–≤–æ! ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ **10 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**, –ø—Ä–æ—â–µ –æ—Ç–ª–∞–¥–∫–∞, –ª–µ–≥—á–µ –æ—Ç–∫–∞—Ç.

---

## üìã –¢–∏–ø–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏:
```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status postal-*

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart postal-web postal-smtp postal-worker

# –õ–æ–≥–∏
sudo journalctl -u postal-* -f
```

### –†–∞–±–æ—Ç–∞ —Å Postal:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
./script/check-status.sh

# –ö–æ–Ω—Å–æ–ª—å Rails
./bin/postal console

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./bin/postal make-user

# –í–µ—Ä—Å–∏—è
./bin/postal version
```

### –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:
```bash
git log --oneline -10           # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
git checkout –ü–†–ï–î–´–î–£–©–ò–ô_–ö–û–ú–ú–ò–¢  # –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è
./script/deploy-update.sh       # –ü—Ä–∏–º–µ–Ω–∏—Ç—å
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
./script/check-status.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
sudo journalctl -u postal-* -p err -n 100

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep postal

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo ss -tuln | grep -E ':(25|5000)'
```

---

## üéØ Workflow –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. **–õ–æ–∫–∞–ª—å–Ω–æ:** –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
   ```bash
   # –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥
   bundle exec rspec              # –¢–µ—Å—Ç—ã
   foreman start -f Procfile.dev  # –ü—Ä–æ–≤–µ—Ä–∫–∞
   ```

2. **–ö–æ–º–º–∏—Ç –∏ push:**
   ```bash
   git add .
   git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
   git push
   ```

3. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:** –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   ```bash
   ./script/deploy-update.sh
   ```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | Docker | Native Ubuntu |
|---------|--------|---------------|
| –ü–∞–º—è—Ç—å | ~500-800 MB | ~200-300 MB |
| –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | 5-10 –º–∏–Ω | 30-60 —Å–µ–∫ |
| –†–∞–∑–º–µ—Ä –Ω–∞ –¥–∏—Å–∫–µ | ~2-3 GB | ~500 MB |
| –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ | 30-60 —Å–µ–∫ | 5-10 —Å–µ–∫ |

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```bash
# –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ firewall
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 25/tcp    # SMTP
sudo ufw allow 80/tcp    # HTTP
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable

# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron)
0 2 * * * mysqldump -u postal -p postal > /opt/postal/backups/postal_$(date +\%Y\%m\%d).sql
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

- **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ production
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ git branches** –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ë–î** –ø–µ—Ä–µ–¥ –∫—Ä—É–ø–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** —Å –ø–æ–º–æ—â—å—é `check-status.sh`

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [doc/UBUNTU_DEPLOYMENT.md](doc/UBUNTU_DEPLOYMENT.md)
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** [doc/QUICK_START_RU.md](doc/QUICK_START_RU.md)
- **Official Postal Docs:** https://docs.postalserver.io
- **GitHub Issues:** https://github.com/postalserver/postal/issues
- **Discord:** https://discord.postalserver.io

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
postal/
‚îú‚îÄ‚îÄ script/
‚îÇ   ‚îú‚îÄ‚îÄ ubuntu-install.sh    # –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ deploy-update.sh     # –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚≠ê
‚îÇ   ‚îú‚îÄ‚îÄ dev-setup.sh         # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ check-status.sh      # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ doc/
‚îÇ   ‚îú‚îÄ‚îÄ UBUNTU_DEPLOYMENT.md # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ QUICK_START_RU.md    # –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
‚îú‚îÄ‚îÄ bin/postal               # –ì–ª–∞–≤–Ω—ã–π CLI
‚îú‚îÄ‚îÄ README-RU.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ README.md               # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π README
```

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã —Å Postal –Ω–∞ Ubuntu:

- ‚úÖ **–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —à–∞–≥–æ–≤
- ‚úÖ **–õ–µ–≥–∫–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –∫–æ–¥—É –∏ –ª–æ–≥–∞–º
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç** - git checkout –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏
- ‚úÖ **–ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤** - –Ω–µ—Ç –æ–≤–µ—Ä—Ö–µ–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏

**–ì–ª–∞–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:**
```bash
./script/deploy-update.sh
```

–£—Å–ø–µ—à–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ
